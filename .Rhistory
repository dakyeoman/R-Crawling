#   x[2]
# }
# sapply(b4, ff)
# str_sub(sapply(b4, ff), end= -8) #end= -8: 뒤에서 글자 8개를 삭제 *변동
##url 추출
b5 <- b[which(str_detect(b, "subject_fixed")) -2]
#which: TRUE값이 있는 index만 추출
#-2 : 소스코드에서 제목 두 줄 앞
b6 <- str_sub(str_extract(b5, "(?<=href=\").*(?=data-role)"), end = -4)
url <- paste0("https://www.clien.net", b6)
data <- cbind(title, hit, url)
final_data<- rbind(final_data, data)
cat("\n", i)
}
dim(final_data)
head(final_data)#엥 이상하다 27분 02초
for(i in 1:10){
hit <- str_extract(b3, "(?<=\">).*(?=</span>)")[-1]
#sapply(b4, function(x){x[1]}) #함수 바로 작성 가능
##way2
#ff<- function(x) {
#   x[2]
# }
# sapply(b4, ff)
# str_sub(sapply(b4, ff), end= -8) #end= -8: 뒤에서 글자 8개를 삭제 *변동
##url 추출
b5 <- b[which(str_detect(b, "subject_fixed")) -2]
#which: TRUE값이 있는 index만 추출
#-2 : 소스코드에서 제목 두 줄 앞
b6 <- str_sub(str_extract(b5, "(?<=href=\").*(?=data-role)"), end = -4)
url <- paste0("https://www.clien.net", b6)
data <- cbind(title, hit, url)
final_data<- rbind(final_data, data)
cat("\n", i)
}
for(i in 1:10){
url <- paste0("https://www.clien.net/service/board/park?&od=T31&category=0&po=0", i= -1)
b <- readLines(url, encoding = "UTF-8") ##or EUC-KR
length(b)
head(b, 30)
tail(b)
#str_extract(b2, "(?<=abc").*(?=ijk)")##abc와 ijk 사이에 있는 텍스트 추출
#str_extract(data, "(?<=abc).*(?=)")##앞에 abc가 있는 것 추출
#str_extract(data, "(?<=).*(?=i)")##뒤에 i가 있는 것 추출
#제목 추출
b2<- b[str_detect(b, "subject_fixed")]
title <- str_extract(b2, "(?<=title=\").*(?=\">)")
#조회수 추출
b3<- b[str_detect(b, "<span class=\"hit\">")];b3
#b4 <- str_split(b3, "hit\">");b4
##way1
for(i in 1:10){
hit <- str_extract(b3, "(?<=\">).*(?=</span>)")[-1]
#sapply(b4, function(x){x[1]}) #함수 바로 작성 가능
##way2
#ff<- function(x) {
#   x[2]
# }
# sapply(b4, ff)
# str_sub(sapply(b4, ff), end= -8) #end= -8: 뒤에서 글자 8개를 삭제 *변동
##url 추출
b5 <- b[which(str_detect(b, "subject_fixed")) -2]
#which: TRUE값이 있는 index만 추출
#-2 : 소스코드에서 제목 두 줄 앞
b6 <- str_sub(str_extract(b5, "(?<=href=\").*(?=data-role)"), end = -4)
url <- paste0("https://www.clien.net", b6)
data <- cbind(title, hit, url)
final_data<- rbind(final_data, data)
cat("\n", i)
}
}
for(i in 1:10){
hit <- str_extract(b3, "(?<=\">).*(?=</span>)")[-1]
}
##클리앙 크롤링
i <- 1
final_data <- NULL
for(i in 1:10){
b <- readLines(url, encoding = "UTF-8") ##or EUC-KR
length(b)
head(b, 30)
tail(b)
#제목 추출
b2<- b[str_detect(b, "subject_fixed")]
title <- str_extract(b2, "(?<=title=\").*(?=\">)")
#조회수 추출
b3<- b[str_detect(b, "<span class=\"hit\">")];b3
for(i in 1:10){
hit <- str_extract(b3, "(?<=\">).*(?=</span>)")[-1]
}
##클리앙 크롤링
i <- 1
final_data <- NULL
for(i in 1:10){
url <- paste0("https://www.clien.net/service/board/park?&od=T31&category=0&po=0", i= -1)
b <- readLines(url, encoding = "UTF-8") ##or EUC-KR
length(b)
head(b, 30)
tail(b)
}
##클리앙 크롤링
i <- 1
dc_data <- NULL
for(i in 1:10){
url <- paste0("https://gall.dcinside.com/board/lists/?id=superidea&page=", i)
b <- readLines(url, encoding = "UTF-8")
library(stringr)
#제목/url
index <- which(str_detect(b, "gall_tit ub-word"))[-1]
b2 <- b[index+1]
title <- str_trim(str_extract(b2, ("(?<=</strong>).*(?=</a>)")))
con_url <- str_sub(str_extract(b2, ("(?<=a href=).*(?=em class)")), 3, end = -17)
con_url2 <- paste0("https://gall.dcinside.com/", con_url)
#조회수
hit_index <- which(str_detect(b, "gall_count"))[-1]
hit <- as.numeric(str_sub(str_extract(b[hit_index], ("(?<=gall_count).*(?=</td>)")), 3))
hit
#추천수
rec_index <- which(str_detect(b, "gall_recommend"))[-1]
rec <- as.numeric(str_extract(b[rec_index], ("(?<=gall_recommend\">).*(?=</td>)")))
data <- cbind(title, con_url2, hit, rec) #->one matrix
dc_data <- rbind(dc_data, data)
cat("\n", i)
}
head(dc_data)
dim(dc_data)
setwd("/Users/adrua/Desktop/R-Crawling_new/R-Crawling/")
write.csv(dc_data, "dc_data.csv", row.names = F)
data <- read.csv("dc_data.csv")
head(data)
dim(data)
url <- as.character(data$con_url2)
i <- 1
#for(i in 1:length(url)){
b <- readLines(url[1], encoding = "UTF-8")
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, "본문 우측 광고"))]
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, "<!--  본문 우측 광고 -->"))]
b3 <- paste(b2, collapse = " ")
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, "<!--  본문 우측 광고 -->"))]
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, "<!--  본문 우측 광고 -->"))]
b3 <- paste(b2, collapse = " ")
}
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, ""))]
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, "  본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ")
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, "  본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ")
}
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, "  본문 우측 광고 ")]
b3 <- paste(b2, collapse = " ")
}
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, "  본문 우측 광고 "))]
b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
}
str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 ")
str_detect(b, "gallview_contents"))
str_detect(b, "gallview_contents")
url
url <- as.character(data$con_url2)
url
dc_data <- NULL
for(i in 1:10){
url <- paste0("https://gall.dcinside.com/board/lists/?id=superidea&page=", i)
b <- readLines(url, encoding = "UTF-8")
library(stringr)
#제목/url
index <- which(str_detect(b, "gall_tit ub-word"))[-1]
b2 <- b[index+1]
title <- str_trim(str_extract(b2, ("(?<=</strong>).*(?=</a>)")))
con_url <- str_sub(str_extract(b2, ("(?<=a href=).*(?=em class)")), 3, end = -17)
con_url2 <- paste0("https://gall.dcinside.com/", con_url)
#조회수
hit_index <- which(str_detect(b, "gall_count"))[-1]
hit <- as.numeric(str_sub(str_extract(b[hit_index], ("(?<=gall_count).*(?=</td>)")), 3))
hit
#추천수
rec_index <- which(str_detect(b, "gall_recommend"))[-1]
rec <- as.numeric(str_extract(b[rec_index], ("(?<=gall_recommend\">).*(?=</td>)")))
data <- cbind(title, con_url2, hit, rec) #->one matrix
dc_data <- rbind(dc_data, data)
cat("\n", i)
}
head(dc_data)
dim(dc_data)
setwd("/Users/adrua/Desktop/R-Crawling_new/R-Crawling/")
write.csv(dc_data, "dc_data.csv", row.names = F)
data <- read.csv("dc_data.csv")
head(data)
dim(data)
url <- as.character(data$con_url2)
url
i <- 1
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
}
str_detect(b, "gallview_contents")
url <- as.character(data$con_url2);url
}
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ")
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4)
b5 <- gsub("\t|&nbsp;", "", b4) ; b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b4)
con <- str_trim(b4);con
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b4);con
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b4);con
con <- str_trim(b5);con
contents <- c()
contents <- c(con, b5)
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(con, b5)
}
contents <- c(contents, con)
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(contents, con)
}
i <- 1
contents <- c()
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(contents, con)
}
dc_data <- NULL
for(i in 1:10){
url <- paste0("https://gall.dcinside.com/board/lists/?id=superidea&page=", i)
b <- readLines(url, encoding = "UTF-8")
library(stringr)
#제목/url
index <- which(str_detect(b, "gall_tit ub-word"))[-1]
b2 <- b[index+1]
title <- str_trim(str_extract(b2, ("(?<=</strong>).*(?=</a>)")))
con_url <- str_sub(str_extract(b2, ("(?<=a href=).*(?=em class)")), 3, end = -17)
con_url2 <- paste0("https://gall.dcinside.com/", con_url)
#조회수
hit_index <- which(str_detect(b, "gall_count"))[-1]
hit <- as.numeric(str_sub(str_extract(b[hit_index], ("(?<=gall_count).*(?=</td>)")), 3))
hit
#추천수
rec_index <- which(str_detect(b, "gall_recommend"))[-1]
rec <- as.numeric(str_extract(b[rec_index], ("(?<=gall_recommend\">).*(?=</td>)")))
data <- cbind(title, con_url2, hit, rec) #->one matrix
dc_data <- rbind(dc_data, data)
cat("\n", i)
}
head(dc_data)
dim(dc_data)
setwd("/Users/adrua/Desktop/R-Crawling_new/R-Crawling/")
write.csv(dc_data, "dc_data.csv", row.names = F)
data <- read.csv("dc_data.csv")
head(data)
dim(data)
url <- as.character(data$con_url2);url
i <- 1
contents <- c()
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(contents, con)
}
dc_data <- NULL
for(i in 1:10){
url <- paste0("https://gall.dcinside.com/board/lists/?id=superidea&page=", i)
b <- readLines(url, encoding = "UTF-8")
library(stringr)
#제목/url
index <- which(str_detect(b, "gall_tit ub-word"))[-1]
b2 <- b[index+1]
title <- str_trim(str_extract(b2, ("(?<=</strong>).*(?=</a>)")))
con_url <- str_sub(str_extract(b2, ("(?<=a href=).*(?=em class)")), 3, end = -17)
con_url2 <- paste0("https://gall.dcinside.com/", con_url)
#조회수
hit_index <- which(str_detect(b, "gall_count"))[-1]
hit <- as.numeric(str_sub(str_extract(b[hit_index], ("(?<=gall_count).*(?=</td>)")), 3))
hit
#추천수
rec_index <- which(str_detect(b, "gall_recommend"))[-1]
rec <- as.numeric(str_extract(b[rec_index], ("(?<=gall_recommend\">).*(?=</td>)")))
data <- cbind(title, con_url2, hit, rec) #->one matrix
dc_data <- rbind(dc_data, data)
cat("\n", i)
}
head(dc_data)
dim(dc_data)
setwd("/Users/adrua/Desktop/R-Crawling_new/R-Crawling/")
write.csv(dc_data, "dc_data.csv", row.names = F)
data <- read.csv("dc_data.csv")
head(data)
dim(data)
url <- as.character(data$con_url2);url
con_url2 <- paste0("https://gall.dcinside.com/", con_url)
con_url <- str_sub(str_extract(b2, ("(?<=a href=).*(?=em class)")), 3, end = -17)
con_url2 <- paste0("https://gall.dcinside.com/", con_url)
con_url2 <- paste0("https://gall.dcinside.com/", con_url) ;con_url
Sts.sleep()
Sys.sleep()
Sys.sleep()
runif(1)
runif(1)
runif(1)
runif(1)
runif(1)
runif(1)
runif(1)
Sys.sleep(runif(1))
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(contents, con)
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
Sys.sleep(runif(1))
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(contents, con)
}
dc_data <- NULL
for(i in 1:10){
url <- paste0("https://gall.dcinside.com/board/lists/?id=superidea&page=", i)
b <- readLines(url, encoding = "UTF-8")
library(stringr)
#제목/url
index <- which(str_detect(b, "gall_tit ub-word"))[-1]
b2 <- b[index+1]
title <- str_trim(str_extract(b2, ("(?<=</strong>).*(?=</a>)")))
con_url <- str_sub(str_extract(b2, ("(?<=a href=).*(?=em class)")), 3, end = -17)
con_url2 <- paste0("https://gall.dcinside.com/", con_url)
#조회수
hit_index <- which(str_detect(b, "gall_count"))[-1]
hit <- as.numeric(str_sub(str_extract(b[hit_index], ("(?<=gall_count).*(?=</td>)")), 3))
hit
#추천수
rec_index <- which(str_detect(b, "gall_recommend"))[-1]
rec <- as.numeric(str_extract(b[rec_index], ("(?<=gall_recommend\">).*(?=</td>)")))
data <- cbind(title, con_url2, hit, rec) #->one matrix
dc_data <- rbind(dc_data, data)
cat("\n", i)
}
head(dc_data)
dim(dc_data)
setwd("/Users/adrua/Desktop/R-Crawling_new/R-Crawling/")
write.csv(dc_data, "dc_data.csv", row.names = F)
data <- read.csv("dc_data.csv")
head(data)
dim(data)
url <- as.character(data$con_url2);url
i <- 1
contents <- c()
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
Sys.sleep(runif(1))
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(contents, con)
}
url <- as.character(data$con_url2);url
con_url2 <- paste0("https://gall.dcinside.com/", con_url)
con_url <- str_sub(str_extract(b2, ("(?<=a href=).*(?=em class)")), 3, end = -17)
con_url2 <- paste0("https://gall.dcinside.com/", con_url) ;con_url
con_url2 <- paste0("https://gall.dcinside.com/", con_url) ;con_url2
con_url
Sys.sleep(runif(1)*2)
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
dc_data <- NULL
for(i in 1:10){
url <- paste0("https://gall.dcinside.com/board/lists/?id=superidea&page=", i)
b <- readLines(url, encoding = "UTF-8")
library(stringr)
#제목/url
index <- which(str_detect(b, "gall_tit ub-word"))[-1]
b2 <- b[index+1]
title <- str_trim(str_extract(b2, ("(?<=</strong>).*(?=</a>)")))
con_url <- str_sub(str_extract(b2, ("(?<=a href=).*(?=em class)")), 3, end = -17)
con_url2 <- paste0("https://gall.dcinside.com/", con_url)
#조회수
hit_index <- which(str_detect(b, "gall_count"))[-1]
hit <- as.numeric(str_sub(str_extract(b[hit_index], ("(?<=gall_count).*(?=</td>)")), 3))
hit
#추천수
rec_index <- which(str_detect(b, "gall_recommend"))[-1]
rec <- as.numeric(str_extract(b[rec_index], ("(?<=gall_recommend\">).*(?=</td>)")))
data <- cbind(title, con_url2, hit, rec) #->one matrix
dc_data <- rbind(dc_data, data)
cat("\n", i)
}
head(dc_data)
dim(dc_data)
setwd("/Users/adrua/Desktop/R-Crawling_new/R-Crawling/")
write.csv(dc_data, "dc_data.csv", row.names = F)
data <- read.csv("dc_data.csv")
head(data)
dim(data)
url <- as.character(data$con_url2);url
i <- 1
contents <- c()
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
Sys.sleep(runif(1)*2)
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(contents, con)
}
contents
Sys.sleep(runif(1)*2)
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(contents, con)
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
Sys.sleep(runif(1)*2)
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(contents, con)
}
write.csv(data2, "dc.csv", row.names = F)
dc_data <- NULL
for(i in 1:10){
url <- paste0("https://gall.dcinside.com/board/lists/?id=superidea&page=", i)
b <- readLines(url, encoding = "UTF-8")
library(stringr)
#제목/url
index <- which(str_detect(b, "gall_tit ub-word"))[-1]
b2 <- b[index+1]
title <- str_trim(str_extract(b2, ("(?<=</strong>).*(?=</a>)")))
con_url <- str_sub(str_extract(b2, ("(?<=a href=).*(?=em class)")), 3, end = -17)
con_url2 <- paste0("https://gall.dcinside.com/", con_url)
#조회수
hit_index <- which(str_detect(b, "gall_count"))[-1]
hit <- as.numeric(str_sub(str_extract(b[hit_index], ("(?<=gall_count).*(?=</td>)")), 3))
hit
#추천수
rec_index <- which(str_detect(b, "gall_recommend"))[-1]
rec <- as.numeric(str_extract(b[rec_index], ("(?<=gall_recommend\">).*(?=</td>)")))
data <- cbind(title, con_url2, hit, rec) #->one matrix
dc_data <- rbind(dc_data, data)
cat("\n", i)
}
head(dc_data)
dim(dc_data)
setwd("/Users/adrua/Desktop/R-Crawling_new/R-Crawling/")
write.csv(dc_data, "dc_data.csv", row.names = F)
data <- read.csv("dc_data.csv")
head(data)
dim(data)
url <- as.character(data$con_url2);url
i <- 1
contents <- c()
for(i in 1:length(url)){
b <- readLines(url[i], encoding = "UTF-8")
Sys.sleep(runif(1)*2)
b2 <- b[which(str_detect(b, "gallview_contents")):which(str_detect(b, " 본문 우측 광고 "))]
b3 <- paste(b2, collapse = " ");b3
b4 <- gsub("<.*?>", "", b3);b4
b5 <- gsub("\t|&nbsp;", "", b4) ; b5
con <- str_trim(b5);con
contents <- c(contents, con)
cat("\n", i)
}
dim(data)
